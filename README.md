# Mipa Tab Manager

标签页管理器，帮助您将浏览器标签页组织成集合，提高浏览效率。

## 功能特性

- 📁 **标签页集合管理**：将标签页组织成命名的集合
- 🌈 **彩色编码**：支持8种颜色主题，直观区分不同集合
- 🔍 **全局搜索**：实时搜索集合名称、标签页标题和URL
- 🖱️ **拖放交互**：
  - 在集合之间拖放移动标签页
  - 从侧边栏（当前打开的标签页）拖放到集合
  - 自由调整集合内标签页的顺序
- 🔄 **数据同步**：
  - 支持 GitHub Gist 自动同步
  - 多设备间数据共享（保存时自动推送，加载时自动拉取）
  - 本地多窗口实时状态同步
- 💾 **数据备份**：支持手动导出/导入 JSON 数据
- 📝 **详细编辑**：支持修改标签页的标题、URL 和描述
- 📱 **双模式界面**：
  - **弹窗模式**：快速保存当前标签页/窗口
  - **主应用模式**：全功能的沉浸式管理界面
- ⚡ **智能去重**：自动检测重复URL，避免冗余收藏
- 📊 **侧边栏视图**：按窗口分组显示当前所有打开的标签页

## 技术栈

- **构建工具**: Vite
- **前端框架**: 原生 HTML/CSS/JavaScript (ES Modules)
- **扩展架构**: Chrome Manifest V3
- **拖放库**: SortableJS (npm)
- **图标库**: Font Awesome (npm)
- **存储方式**: Chrome Storage API (Local)
- **同步机制**: GitHub Gist API

## 安装

### 方法一：直接下载（推荐）

1. 转到本仓库的 [Releases 页面](https://github.com/wangqicc/mipa-tab/releases)
2. 下载最新版本的 `mipa-tab.zip` 压缩包
3. 解压该压缩包
4. 打开 Chrome 浏览器，转到 `chrome://extensions/`
5. 启用右上角的 "开发者模式"
6. 点击 "加载已解压的扩展程序"，选择解压后的文件夹
7. 扩展程序即安装成功

### 方法二：从源码构建

如果您想自己修改代码或体验最新开发版：

1. 克隆或下载此仓库
2. 安装依赖：
   ```bash
   npm install
   ```
3. 构建项目：
   ```bash
   npm run build
   ```
4. 打开 Chrome 浏览器，转到 `chrome://extensions/`
5. 启用右上角的 "开发者模式"
6. 点击 "加载已解压的扩展程序" 并选择项目目录下的 `dist` 文件夹
7. 扩展程序将被添加到您的 Chrome 浏览器

## 使用方法

### 基本使用

#### 弹窗模式 (快速访问)
1. 点击 Chrome 工具栏中的 Mipa Tab Manager 图标
2. **快速搜索**：输入关键词过滤集合
3. **添加当前页**：点击集合右侧的 "+" 按钮
4. **保存整窗**：点击 "My Collection" 标题右侧的 "↓" 图标，将当前窗口所有标签页保存为新集合
5. **打开主页**：点击 "OPEN MIPA" 进入完整管理界面

#### 主应用模式 (完整功能)
界面分为三个区域：
- **顶部导航**：Gist同步、全局搜索、批量操作、导入导出
- **集合区域**：卡片式展示所有标签页集合
- **右侧侧边栏**：显示当前浏览器打开的所有标签页（按窗口分组）

### 核心功能详解

#### 1. 搜索
- 在搜索框输入关键词
- 系统会同时匹配：
  - 集合名称
  - 标签页标题
  - 标签页 URL
- 匹配项会高亮显示，未匹配的集合自动隐藏

#### 2. 标签页去重
- **添加时检测**：向集合添加标签页时，系统会自动检查 URL
- **去重逻辑**：
  - 弹窗模式/一键保存：比较 `origin + pathname`（忽略查询参数和哈希），适合大多数场景
  - 主应用/拖放：执行更严格的检查，确保数据准确性

#### 3. 数据同步 (GitHub Gist)
推荐配置 Gist 同步以在多台电脑间共享数据：
1. 点击顶部 "Connect to Gist"
2. 输入具有 `gist` 权限的 GitHub Personal Access Token
3. **同步机制**：
   - **连接时**：自动合并本地和远程数据（保留最新的修改）
   - **保存时**：每次修改集合后，自动推送到 Gist
   - **加载时**：启动时检查 Gist 更新并自动拉取

#### 4. 导入/导出
- **导出**：生成 `.json` 文件，包含所有集合数据
- **导入**：支持恢复之前的备份，系统会智能合并数据（跳过已存在的重复项）

## 权限说明

- `tabs`：读取和管理浏览器标签页信息
- `storage`：保存集合数据到本地 Chrome 存储
- `https://api.github.com/*`：访问 GitHub API 实现 Gist 同步

## GitHub Personal Access Token 获取

1. 访问 https://github.com/settings/tokens
2. 点击 "Generate new token (classic)"
3. 勾选 `gist` 权限（Create gists）
4. 生成并复制 Token

## 项目结构

```
mipa-tab/
├── src/
│   ├── css/
│   │   └── styles.css          # 核心样式
│   ├── js/
│   │   ├── services/           # 服务层 (Gist, Storage)
│   │   ├── mipa.js             # 主应用逻辑
│   │   ├── popup.js            # 弹窗逻辑
│   │   └── utils.js            # 工具函数
│   ├── public/
│   │   └── manifest.json       # 扩展配置
│   ├── mipa.html               # 主应用页面模板
│   └── popup.html              # 弹窗页面模板
├── dist/                       # 构建输出目录 (加载此目录)
├── vite.config.js              # Vite 配置
└── README.md                   # 说明文档
```

## 贡献

欢迎提交 Issue 或 Pull Request 来改进这个项目！

## 许可证

MIT
