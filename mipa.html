<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Mipa - Tab Manager</title>
    <link rel="stylesheet" href="css/styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <!-- Top Navigation -->
        <header class="mipa-header">
            <div class="header-top">
                <div class="logo-section">
                    <h1 class="logo">My Collections</h1>
                    <span id="collection-count" class="collection-count">0 collections</span>
                </div>
                <div class="top-buttons">
                    <button id="connect-gist" class="btn-primary">Connect to Gist</button>
                </div>
            </div>
            <div class="header-bottom">
                <div class="search-section">
                    <div class="search-container">
                        <input type="text" id="collection-search" placeholder="Search for collections or spaces" class="collection-search-input">
                        <button class="search-btn">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                                <circle cx="11" cy="11" r="8"></circle>
                                <line x1="21" y1="21" x2="16.65" y2="16.65"></line>
                            </svg>
                        </button>
                    </div>
                </div>
                <div class="header-buttons">
                    <button id="toggle-collections" class="btn-primary">EXPAND/COLLAPSE</button>
                    <button id="add-collection" class="btn-primary">ADD COLLECTION</button>
                    <button id="export-data" class="btn-primary">EXPORT</button>
                    <button id="import-data" class="btn-primary">IMPORT</button>
                    <input type="file" id="import-file-input" style="display: none;" accept=".json">
                </div>
            </div>
        </header>
        <!-- Main Content -->
        <main class="mipa-main">
            <!-- Collections Area -->
            <div class="collections-area">
                <!-- Add Collection Form -->
                <div id="add-collection-form" class="add-collection-form" style="display: none;">
                    <div class="add-collection-input-group">
                        <input type="text" id="new-collection-name" placeholder="type the collection title" class="add-collection-input">
                        <button type="button" id="cancel-add-collection" class="btn-cancel">CANCEL</button>
                        <button type="button" id="save-add-collection" class="btn-primary">SAVE</button>
                    </div>
                    <div class="color-picker-container">
                        <span class="color-label">Color</span>
                        <div class="color-options">
                            <input type="radio" id="color-white" name="collection-color" value="white" checked>
                            <label for="color-white" class="color-option white"></label>
                            <input type="radio" id="color-gray" name="collection-color" value="gray">
                            <label for="color-gray" class="color-option gray"></label>
                            <input type="radio" id="color-red" name="collection-color" value="red">
                            <label for="color-red" class="color-option red"></label>
                            <input type="radio" id="color-orange" name="collection-color" value="orange">
                            <label for="color-orange" class="color-option orange"></label>
                            <input type="radio" id="color-yellow" name="collection-color" value="yellow">
                            <label for="color-yellow" class="color-option yellow"></label>
                            <input type="radio" id="color-green" name="collection-color" value="green">
                            <label for="color-green" class="color-option green"></label>
                            <input type="radio" id="color-blue" name="collection-color" value="blue">
                            <label for="color-blue" class="color-option blue"></label>
                            <input type="radio" id="color-purple" name="collection-color" value="purple">
                            <label for="color-purple" class="color-option purple"></label>
                        </div>
                    </div>
                </div>
                <!-- Collections will be dynamically added here -->
                <div id="collections-container"></div>
            </div>
            <!-- Sidebar Trigger Area -->
            <div class="sidebar-trigger"></div>
            <!-- Open Tabs Sidebar -->
            <aside class="open-tabs-sidebar">
                <div class="sidebar-header">
                    <h3>OPEN TABS</h3>
                </div>
                <div id="windows-container">
                    <!-- Windows will be dynamically added here -->
                </div>
            </aside>
        </main>
    </div>
    <!-- Modal for Tab Editing -->
    <div id="edit-tab-modal" class="modal">
        <div class="modal-content edit-tab-modal-content">
            <div class="modal-header">
                <h2 id="edit-tab-title">Edit Tab</h2>
                <span class="close edit-tab-close">&times;</span>
            </div>
            <form id="edit-tab-form">
                <div class="form-group tab-favicon-container">
                    <img id="edit-tab-favicon" class="tab-favicon" src="" alt="Tab favicon">
                </div>
                <div class="form-group">
                    <label for="edit-title">Title</label>
                    <input type="text" id="edit-title" name="title" required>
                </div>
                <div class="form-group">
                    <label for="edit-description">Description</label>
                    <textarea id="edit-description" name="description" rows="3"></textarea>
                </div>
                <div class="form-group">
                    <label for="edit-url">URL:</label>
                    <input type="url" id="edit-url" name="url" required>
                </div>
                <div class="form-actions">
                    <button type="button" id="delete-tab-btn" class="btn-delete"><i class="fas fa-times"></i>Delete</button>
                    <div class="form-actions-right">
                        <button type="button" id="cancel-edit-btn" class="btn-cancel">Cancel</button>
                        <button type="submit" class="btn-primary btn-save">Done</button>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <!-- Modal for Gist Login, Logout and Error -->
    <div id="gist-modal" class="modal">
        <div class="modal-content gist-modal-content">
            <div class="modal-header">
                <h2 id="gist-modal-title">Connect to GitHub Gist</h2>
                <span class="close gist-modal-close">&times;</span>
            </div>
            <!-- Login Form -->
            <div id="gist-login-form" class="gist-modal-body">
                <div class="form-group">
                    <label for="github-token">GitHub Personal Access Token</label>
                    <input type="password" id="github-token" name="github-token" placeholder="Enter your GitHub token with gist scope" required>
                    <div class="token-hint">
                        <p>You need a GitHub Personal Access Token with <strong>gist</strong> permissions. <a href="https://github.com/settings/tokens/new?scopes=gist" target="_blank">Create one here</a></p>
                    </div>
                </div>
                <div class="form-actions">
                    <button type="button" id="gist-cancel-btn" class="btn-cancel">Cancel</button>
                    <button type="button" id="gist-connect-btn" class="btn-primary">Connect</button>
                </div>
            </div>
            <!-- Logout Confirmation -->
            <div id="gist-logout-confirm" class="gist-modal-body" style="display: none;">
                <div class="logout-warning">
                    <i class="fa-solid fa-exclamation-circle"></i>
                    <p>Are you sure you want to logout from GitHub Gist?</p>
                    <p class="warning-text">You will no longer be able to sync your data across devices.</p>
                </div>
                <div class="form-actions">
                    <button type="button" id="gist-cancel-logout-btn" class="btn-cancel">Cancel</button>
                    <button type="button" id="gist-logout-btn" class="btn-delete">Logout</button>
                </div>
            </div>
            <!-- Error Message -->
            <div id="gist-error-message" class="gist-modal-body" style="display: none;">
                <div class="error-warning">
                    <i class="fa-solid fa-times-circle"></i>
                    <p id="error-message-text"></p>
                </div>
                <div class="form-actions">
                    <button type="button" id="gist-close-error-btn" class="btn-primary">OK</button>
                </div>
            </div>
        </div>
    </div>
    
    <!-- Modal for Delete Confirmation -->
    <div id="delete-modal" class="modal">
        <div class="modal-content gist-modal-content">
            <div class="modal-header">
                <h2 id="delete-modal-title">Delete Collection</h2>
                <span class="close delete-modal-close">&times;</span>
            </div>
            <div id="delete-confirm-body" class="gist-modal-body">
                <div class="logout-warning">
                    <i class="fa-solid fa-exclamation-circle"></i>
                    <p>Are you sure you want to delete this collection?</p>
                    <p class="warning-text">This action cannot be undone.</p>
                </div>
                <div class="form-actions">
                    <button type="button" id="delete-cancel-btn" class="btn-cancel">Cancel</button>
                    <button type="button" id="delete-confirm-btn" class="btn-delete">Delete</button>
                </div>
            </div>
        </div>
    </div>
    <!-- Backgroud Image -->
    <img id="bg-image" src="img/mipa.jpg">
    <script src="js/lib/sortable.min.js"></script>
    <script src="js/mipa.js"></script>
</body>
</html>
